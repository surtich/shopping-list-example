iris.path={screen:{welcome:{js:"/shopping/screen/welcome.js",html:"/shopping/screen/welcome.html"},home:{js:"/shopping/screen/home.js",html:"/shopping/screen/home.html"},categories:{js:"/shopping/screen/products/categories.js",html:"/shopping/screen/products/categories.html"},products:{js:"/shopping/screen/products/products.js",html:"/shopping/screen/products/products.html"},shopping:{js:"/shopping/screen/list/shopping.js",html:"/shopping/screen/list/shopping.html"}},ui:{category_list_item:{js:"/shopping/ui/products/category_list_item.js",
html:"/shopping/ui/products/category_list_item.html"},product_list_item:{js:"/shopping/ui/products/product_list_item.js",html:"/shopping/ui/products/product_list_item.html"},product_shopping_list_item:{js:"/shopping/ui/list/product_shopping_list_item.js",html:"/shopping/ui/list/product_shopping_list_item.html"}},resource:{js:"/shopping/resource.js"}};
$(document).ready(function(){iris.translations("es_ES",{ERROR:"Se ha producido el siguiente error",JQUERY:{DATATABLES:{SEARCH:"Buscar",NEXT:"Siguiente",PREVIOUS:"Anterior",SHOW:"Mostrando _MENU_ l\u00edneas"}}});iris.translations("en_US",{ERROR:"There was an error",JQUERY:{DATATABLES:{SEARCH:"Search",NEXT:"Next",PREVIOUS:"Previous",SHOW:"Show _MENU_ entries"}}});iris.locale("en_US",{dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"January February March April May June July August September October November December".split(" "),
dateFormat:"m/d/Y h:i:s",currency:{formatPos:"n",formatNeg:"(n)",decimal:".",thousand:",",precision:2}});iris.locale("es_ES",{dayNames:"Domingo Lunes Martes Mi\u00e9rcoles Jueves Viernes S\u00e1bado".split(" "),monthNames:"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),dateFormat:"d/m/Y H:i:s",currency:{formatPos:"n",formatNeg:"-n",decimal:",",thousand:".",precision:2}});var a=window.location.href.match(/[?&]lang=[a-z][a-z][\-_][A-Z][A-Z]/);null!==
a?iris.locale(a[0].substring(a[0].length-5,a[0].length)):iris.locale("en_US");iris.baseUri(".");iris.enableLog("localhost");iris.welcome(iris.path.screen.welcome.js)});iris.ui(function(a){a.create=function(){a.tmplMode(a.APPEND);var b=a.setting("product");a.tmpl(iris.path.ui.product_shopping_list_item.html,b);!0===b.purchased&&(a.get("order").addClass("purchased"),a.get("nameProduct").addClass("purchased"),a.get("icon-shopping-cart").removeClass("icon-shopping-cart").addClass("icon-shopping-cart-remove"));a.get("remove").on("click",a.setting("removeProduct"));a.get("buy").on("click",function(){a.setting("buyProduct")();a.get("order").toggleClass("purchased");a.get("nameProduct").toggleClass("purchased");
a.get("icon-shopping-cart").toggleClass("icon-shopping-cart icon-shopping-cart-remove")})};a.destroy=function(){a.get("remove").off("click");a.get("buy").off("click")}},iris.path.ui.product_shopping_list_item.js);iris.ui(function(a){a.create=function(){a.tmplMode(a.APPEND);var b=a.setting("category");a.tmpl(iris.path.ui.category_list_item.html,b)}},iris.path.ui.category_list_item.js);iris.ui(function(a){var b;a.create=function(){a.tmplMode(a.APPEND);b=a.setting("product");a.tmpl(iris.path.ui.product_list_item.html,b);a.get("product").change(function(){this.checked?iris.notify(model.event.PRODUCTS.ADD,b):iris.notify(model.event.PRODUCTS.REMOVE,b.idProduct)})};a.awake=function(){model.shoppingList.getShoppingProduct(b.idProduct)?a.get("product").prop("checked",!0):a.get("product").prop("checked",!1)}},iris.path.ui.product_list_item.js);iris.resource(function(a){a.load=function(b,c,d){a.get(iris.baseUri()+b,c,d)}},iris.path.resource.js);iris.screen(function(a){iris.translations("es_ES",{LOADING:"Cargando...",MENU:{WELCOME:"Ejemplo de lista de la compra",HOME:"Incio",PRODUCTS:"Productos",SHOPPING_LIST:"Lista de la compra"}});iris.translations("en_US",{LOADING:"Loading...",MENU:{WELCOME:"Shopping List Example",HOME:"Home",PRODUCTS:"Products",SHOPPING_LIST:"Shopping List"}});a.create=function(){a.tmpl(iris.path.screen.welcome.html);$.ajaxPrefilter(function(b,c,d){a.get("loading").show();d.always(function(){a.get("loading").hide()})});
a.screens("screens",[["home",iris.path.screen.home.js],["categories",iris.path.screen.categories.js],["products",iris.path.screen.products.js],["shopping",iris.path.screen.shopping.js]]);$("[data-lang]").click(function(a){var c=$(this),d=/[?&]lang=[a-z][a-z][\-_][A-Z][A-Z]/,e=window.location.href.match(d),f=window.location.href,g=window.location.hash;null===e?(e="lang="+c.data("lang"),e=window.location.href.match(/[?]/)?"&"+e:"?"+e,f=f.substr(0,f.indexOf(g)),f=f+e+g):(e=e[0].substr(0,6),f=window.location.href.replace(d,
e+c.data("lang")));window.location.href=f;a.preventDefault()});document.location.hash||iris.navigate("#/home")}},iris.path.screen.welcome.js);iris.screen(function(a){function b(){a.destroyUIs("shoppingList_products");var b=a.get("shopping_table");b.hasOwnProperty("fnClearTable")&&(b.fnClearTable(),b.fnDestroy());b=model.shoppingList.getSortedShoppingProducts();0<b.length&&$.each(b,function(b,c){var d=a.ui("shoppingList_products",iris.path.ui.product_shopping_list_item.js,{product:c,removeProduct:function(){var b=c.idProduct,e=a.get("shopping_table"),f=$(this).closest("tr").get(0);e.fnDeleteRow(e.fnGetPosition(f));a.destroyUI(d);iris.notify(model.event.PRODUCTS.REMOVE,
b)},buyProduct:function(){iris.notify(model.event.SHOPPING.CHANGE_STATE,c.idProduct)}})});a.get("shopping_table").dataTable({bPaginate:!0,bInfo:!1,bAutoWidth:!1,oLanguage:{sSearch:iris.translate("JQUERY.DATATABLES.SEARCH")+":",sZeroRecords:iris.translate("SHOPPING_LIST.EMPTY"),sLengthMenu:iris.translate("JQUERY.DATATABLES.SHOW"),oPaginate:{sNext:iris.translate("JQUERY.DATATABLES.NEXT"),sPrevious:iris.translate("JQUERY.DATATABLES.PREVIOUS")}},aoColumnDefs:[{bSortable:!1,aTargets:[2]},{sType:"html",
aTargets:[0]}],aaSorting:[]});c()}function c(){0<model.shoppingList.getSortedShoppingProducts().length?(a.get("div_shopping").show(),a.get("msg").hide(),d()):(a.get("div_shopping").hide(),a.get("msg").show())}function d(){a.get("btn_check_all").toggleClass("disabled",!model.shoppingList.hasNoPurchasedProducts()).prop("disabled",!model.shoppingList.hasNoPurchasedProducts());a.get("btn_uncheck_all").toggleClass("disabled",!model.shoppingList.hasPurchasedProducts()).prop("disabled",!model.shoppingList.hasPurchasedProducts());
a.get("btn_remove_checked").toggleClass("disabled",!model.shoppingList.hasPurchasedProducts()).prop("disabled",!model.shoppingList.hasPurchasedProducts())}iris.translations("es_ES",{SHOPPING_LIST:{EMPTY:"La cesta est\u00e1 vac\u00eda.",REFRESH:"Actualizar",REMOVE_ALL:"Borrar todos",CHECK_ALL:"Marcar todos",UNCHECK_ALL:"Desmarcar todos",INVERT_ALL:"Invertir",REMOVE_PURCHASED:"Borrar marcados",ORDER:"Orden",PRODUCT:"Producto",ACTION:"Acci\u00f3n",BUY:"Cambiar estado",REMOVE:"Borrar"}});iris.translations("en_US",
{SHOPPING_LIST:{EMPTY:"The Shopping list is empty.",REFRESH:"Refresh",REMOVE_ALL:"Remove All",CHECK_ALL:"Check All",UNCHECK_ALL:"Uncheck All",INVERT_ALL:"Invert checks",REMOVE_PURCHASED:"Remove purchased",ORDER:"Order",PRODUCT:"Product",ACTION:"Action",BUY:"Change state",REMOVE:"Remove"}});a.create=function(){a.tmpl(iris.path.screen.shopping.html);a.get("div_shopping").hide();iris.on(model.event.PRODUCTS.REMOVE,c);iris.on(model.event.SHOPPING.CHANGE_STATE,d);a.get("btn_refresh").on("click",function(){b()});
a.get("btn_remove_all").on("click",function(){iris.notify(model.event.SHOPPING.REMOVE_ALL);b()});a.get("btn_check_all").on("click",function(){iris.notify(model.event.SHOPPING.CHECK_ALL);b()});a.get("btn_uncheck_all").on("click",function(){iris.notify(model.event.SHOPPING.UNCHECK_ALL);b()});a.get("btn_invert_check").on("click",function(){iris.notify(model.event.SHOPPING.INVERT_CHECK);b()});a.get("btn_remove_checked").on("click",function(){iris.notify(model.event.SHOPPING.REMOVE_CHECKED);b()})};a.awake=
function(){model.init(!1,function(){b()})};a.destroy=function(){iris.off(model.event.PRODUCTS.REMOVE,c);iris.off(model.event.SHOPPING.CHANGE_STATE,d)}},iris.path.screen.shopping.js);iris.screen(function(a){function b(b){a.get("msg").html(iris.translate("PRODUCTS.CHOOSE_PRODUCTS")+":");$.each(b,function(b,c){a.ui("list_products",iris.path.ui.product_list_item.js,{product:c})})}iris.translations("es_ES",{PRODUCTS:{MISSING_CATEGORY:"Falta el par\u00e1metro <i>idCategoria</i>.",CHOOSE_PRODUCTS:"Elige los productos que te interesen"}});iris.translations("en_US",{PRODUCTS:{MISSING_CATEGORY:"Missing <i>idCategory</i> parameter.",CHOOSE_PRODUCTS:"Choose some products"}});a.create=function(){a.tmpl(iris.path.screen.products.html)};
a.awake=function(c){a.destroyUIs("list_products");model.resource.app.getProducts(c.idCategory,b,function(b,c,f){a.get("msg").html(iris.translate("ERROR")+": <i>"+f+"</i>")})}},iris.path.screen.products.js);iris.screen(function(a){a.create=function(){a.tmpl(iris.path.screen.categories.html);model.init(!1,function(){$.each(model.categories,function(b,c){a.ui("list_categories",iris.path.ui.category_list_item.js,{category:c})})})}},iris.path.screen.categories.js);iris.screen(function(a){iris.translations("es_ES",{HOME:{TITLE:"Ejemplo de lista de la compra",DESC:"Este es un ejemplo de uso de"}});iris.translations("en_US",{HOME:{TITLE:"Shopping List Iris Example",DESC:"This a simple example of using"}});a.create=function(){a.tmpl(iris.path.screen.home.html)}},iris.path.screen.home.js);
iris.tmpl('www/shopping/ui/list/product_shopping_list_item.html','<tr>      <td>        <span data-id="order">##order##</span>    </td>    <td>        <span data-id="nameProduct">##nameProduct##</span>    </td>    <td>        <button type="button" class="btn" data-id="buy" title="@@SHOPPING_LIST.BUY@@"><i data-id="icon-shopping-cart" class="icon-shopping-cart"></i></button>        <button type="button" class="btn" data-id="remove" title="@@SHOPPING_LIST.REMOVE@@"><i class="icon-trash"></i></button>    </td></tr>');
iris.tmpl('www/shopping/ui/products/product_list_item.html','<label class="checkbox">    <input data-id="product" type="checkbox" data-product="##idProduct##">##nameProduct##</label> ');
iris.tmpl('www/shopping/ui/products/category_list_item.html','<li>    <a href="#/products?idCategory=##idCategory##">##nameCategory##</a></li>');
iris.tmpl('www/shopping/screen/home.html','<div>    <h1>@@HOME.TITLE@@</h1>    <p>@@HOME.DESC@@ <a href="https://github.com/iris-js">iris.</a></p></div>');
iris.tmpl('www/shopping/screen/list/shopping.html','<div class="container">      <div data-id="msg">@@SHOPPING_LIST.EMPTY@@</div>    <div data-id="div_shopping">        <div class="control-group">              <form class="well">                <button type="button" class="btn" data-id="btn_refresh"><i class="icon-refresh"></i>@@SHOPPING_LIST.REFRESH@@</button>                <button type="button" class="btn btn-danger" data-id="btn_remove_all"><i class="icon-trash icon-white"></i>@@SHOPPING_LIST.REMOVE_ALL@@</button>                <button type="button" class="btn btn-success" data-id="btn_check_all"><i class="icon-shopping-cart icon-white"></i>@@SHOPPING_LIST.CHECK_ALL@@</button>                <button type="button" class="btn btn-info" data-id="btn_uncheck_all"><i class="icon-shopping-cart-remove"></i>@@SHOPPING_LIST.UNCHECK_ALL@@</button>                <button type="button" class="btn btn-primary" data-id="btn_invert_check"><i class="icon-shopping-cart-invert"></i>@@SHOPPING_LIST.INVERT_ALL@@</button>                <button type="button" class="btn btn-warning" data-id="btn_remove_checked"><i class="icon-shopping-cart-remove-checked"></i>@@SHOPPING_LIST.REMOVE_PURCHASED@@</button>            </form>        </div>        <table class="table table-striped table-bordered"  data-id="shopping_table">            <thead>                <tr>                                <th>@@SHOPPING_LIST.ORDER@@</th>                    <th>@@SHOPPING_LIST.PRODUCT@@</th>                    <th>@@SHOPPING_LIST.ACTION@@</th>                            </tr>            </thead>            <tbody data-id="shoppingList_products">            </tbody>        </table>    </div></div>');
iris.tmpl('www/shopping/screen/products/products.html','<div class="container">      <div data-id="msg">Products</div>    <div class="row">          <div class="span12">              <form class="form-horizontal">                                 <div data-id="list_products" class="controls">                  </div>              </form>        </div>      </div>  </div>  ');
iris.tmpl('www/shopping/screen/products/categories.html','<div class="container">      <div class="row">          <div class="span12">              <ul data-id="list_categories" class="nav nav-tabs nav-stacked">              </ul>          </div>      </div>  </div>  ');
iris.tmpl('www/shopping/screen/welcome.html','<div class="container">    <div class="navbar navbar-inverse">        <div class="navbar-inner">            <div class="container">                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">                    <span class="icon-bar"></span>                    <span class="icon-bar"></span>                    <span class="icon-bar"></span>                </a>                <a class="brand" href="#/home">@@MENU.WELCOME@@</a>                <div class="nav-collapse collapse">                    <ul class="nav">                        <li><a href="#/home">@@MENU.HOME@@</a></li>                        <li><a href="#/categories">@@MENU.PRODUCTS@@</a></li>                        <li><a href="#/shopping">@@MENU.SHOPPING_LIST@@</a></li>                    </ul>                    <ul class="nav pull-right">                        <li><a href="#" data-lang="es_ES"><i class="icon-spain-flag"></i></a></li>                        <li><a href="#" data-lang="en_US"><i class="icon-united-kingdom-flag"></i></a></li>                    </ul>                </div><!--/.nav-collapse -->            </div>        </div>    </div>    <div class="divContainer">        <div data-id="loading" class="divElement loading">@@LOADING@@</div>        <div class="container divElement" data-id="screens"/>            </div></div>');
